AttributeError: 'DatabaseService' object has no attribute 'close'
PS C:\Users\tj169\OneDrive - Flinders\work\capture\backend> python app.py
INFO:app:ğŸš€ å¯åŠ¨Web Content Captureåç«¯æœåŠ¡...
INFO:app:ğŸ“Š æ•°æ®åº“: captured_content
INFO:app:ğŸ”§ è°ƒè¯•æ¨¡å¼: True
 * Serving Flask app 'app'
 * Debug mode: on
INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.107:5000
INFO:werkzeug:Press CTRL+C to quit
INFO:werkzeug: * Restarting with stat
INFO:app:ğŸš€ å¯åŠ¨Web Content Captureåç«¯æœåŠ¡...
INFO:app:ğŸ“Š æ•°æ®åº“: captured_content
INFO:app:ğŸ”§ è°ƒè¯•æ¨¡å¼: True
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 218-411-572
INFO:database:Establishing new MongoDB connection for mongodb+srv://tj15982183241:lqC4PvDOIEDLzBqC@cluster0.3rr2uhr.mongodb.net/capture?retryWrites=true&w=majority
INFO:database:Ensured text index exists for collection 'captured_content'
INFO:database:åˆ›å»ºè¿æ¥ä»¤ç‰ŒæˆåŠŸ: afdbfc41900a7294
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:32] "POST /api/database/connect HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:32] "GET /api/captures?category= HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:32] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:54] "GET /api/captures?category=LKJH HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:55] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:58] "GET /api/captures?category=job HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:36:59] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:03] "GET /api/captures?category=lll HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:03] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:11] "GET /api/captures?category=å‹åŠ›æµ‹è¯• HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:11] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:15] "GET /api/captures?category= HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:15] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:22] "GET /api/captures?category=job HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:22] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:47] "GET /api/captures?category= HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:47] "GET /api/categories HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:58] "GET /api/captures?category=LKJH HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [25/Aug/2025 09:37:58] "GET /api/categories HTTP/1.1" 200 -

{"_id":{"$oid":"68ab05f6f6042019a9958e34"},"title":"KJH","text":"ğŸ“ åˆ›å»ºæ•è·å†…å®¹\n     \nåˆ›å»ºå†…å®¹\nğŸ“‹ è·å–æ•è·åˆ—è¡¨\n   \nè·å–åˆ—è¡¨ å¸¦ç­›é€‰è·å–\nğŸ” è·å–å•ä¸ªå†…å®¹\n\nè·å–å†…å®¹\nâœï¸ æ›´æ–°æ•è·å†…å®¹\n  \næ›´æ–°å†…å®¹\nğŸ—‘ï¸ åˆ é™¤æ•è·å†…å®¹\n\nåˆ é™¤å†…å®¹\nğŸ·ï¸ è·å–åˆ†ç±»åˆ—è¡¨\nè·å–åˆ†ç±»\nğŸ” æœç´¢å†…å®¹\n  \næœç´¢å†…å®¹\nâš¡ æ‰¹é‡æµ‹è¯•\nè¿è¡Œæ‰€æœ‰æµ‹è¯• æ¸…ç©ºæ‰€æœ‰ç»“æœ å‹åŠ›æµ‹è¯•","html":"<div class=\"test-grid\">\n            <!-- åˆ›å»ºæ•è·å†…å®¹æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>ğŸ“ åˆ›å»ºæ•è·å†…å®¹</h3>\n                <input type=\"text\" id=\"createTitle\" class=\"test-input\" placeholder=\"æ ‡é¢˜\" value=\"æµ‹è¯•æ ‡é¢˜\">\n                <input type=\"text\" id=\"createText\" class=\"test-input\" placeholder=\"æ–‡æœ¬å†…å®¹\" value=\"è¿™æ˜¯æµ‹è¯•å†…å®¹\">\n                <input type=\"text\" id=\"createHtml\" class=\"test-input\" placeholder=\"HTMLå†…å®¹\" value=\"&lt;p&gt;è¿™æ˜¯æµ‹è¯•HTML&lt;/p&gt;\">\n                <input type=\"text\" id=\"createTag\" class=\"test-input\" placeholder=\"HTMLæ ‡ç­¾\" value=\"p\">\n                <input type=\"text\" id=\"createUrl\" class=\"test-input\" placeholder=\"URL\" value=\"https://example.com\">\n                <input type=\"text\" id=\"createCategories\" class=\"test-input\" placeholder=\"åˆ†ç±»(é€—å·åˆ†éš”)\" value=\"æµ‹è¯•,ç¤ºä¾‹\">\n                <br>\n                <button class=\"test-button\" onclick=\"testCreateCapture()\">åˆ›å»ºå†…å®¹</button>\n                <div class=\"result-area\" id=\"createResult\"></div>\n            </div>\n\n            <!-- è·å–æ•è·åˆ—è¡¨æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>ğŸ“‹ è·å–æ•è·åˆ—è¡¨</h3>\n                <input type=\"number\" id=\"listPage\" class=\"test-input\" placeholder=\"é¡µç \" value=\"1\">\n                <input type=\"number\" id=\"listLimit\" class=\"test-input\" placeholder=\"æ¯é¡µæ•°é‡\" value=\"10\">\n                <input type=\"text\" id=\"listCategory\" class=\"test-input\" placeholder=\"åˆ†ç±»ç­›é€‰\" value=\"\">\n                <input type=\"text\" id=\"listSearch\" class=\"test-input\" placeholder=\"æœç´¢å…³é”®è¯\" value=\"\">\n                <br>\n                <button class=\"test-button\" onclick=\"testGetCaptures()\">è·å–åˆ—è¡¨</button>\n                <button class=\"test-button warning\" onclick=\"testGetCapturesWithFilters()\">å¸¦ç­›é€‰è·å–</button>\n                <div class=\"result-area\" id=\"listResult\"></div>\n            </div>\n\n            <!-- è·å–å•ä¸ªæ•è·å†…å®¹æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>ğŸ” è·å–å•ä¸ªå†…å®¹</h3>\n                <input type=\"text\" id=\"getSingleId\" class=\"test-input\" placeholder=\"å†…å®¹ID\">\n                <br>\n                <button class=\"test-button\" onclick=\"testGetSingleCapture()\">è·å–å†…å®¹</button>\n                <div class=\"result-area\" id=\"singleResult\"></div>\n            </div>\n\n            <!-- æ›´æ–°æ•è·å†…å®¹æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>âœï¸ æ›´æ–°æ•è·å†…å®¹</h3>\n                <input type=\"text\" id=\"updateId\" class=\"test-input\" placeholder=\"å†…å®¹ID\">\n                <input type=\"text\" id=\"updateTitle\" class=\"test-input\" placeholder=\"æ–°æ ‡é¢˜\" value=\"æ›´æ–°åçš„æ ‡é¢˜\">\n                <input type=\"text\" id=\"updateCategories\" class=\"test-input\" placeholder=\"æ–°åˆ†ç±»\" value=\"æ›´æ–°,åˆ†ç±»\">\n                <br>\n                <button class=\"test-button\" onclick=\"testUpdateCapture()\">æ›´æ–°å†…å®¹</button>\n                <div class=\"result-area\" id=\"updateResult\"></div>\n            </div>\n\n            <!-- åˆ é™¤æ•è·å†…å®¹æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>ğŸ—‘ï¸ åˆ é™¤æ•è·å†…å®¹</h3>\n                <input type=\"text\" id=\"deleteId\" class=\"test-input\" placeholder=\"å†…å®¹ID\">\n                <br>\n                <button class=\"test-button danger\" onclick=\"testDeleteCapture()\">åˆ é™¤å†…å®¹</button>\n                <div class=\"result-area\" id=\"deleteResult\"></div>\n            </div>\n\n            <!-- è·å–åˆ†ç±»æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>ğŸ·ï¸ è·å–åˆ†ç±»åˆ—è¡¨</h3>\n                <button class=\"test-button\" onclick=\"testGetCategories()\">è·å–åˆ†ç±»</button>\n                <div class=\"result-area\" id=\"categoriesResult\"></div>\n            </div>\n\n            <!-- æœç´¢æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>ğŸ” æœç´¢å†…å®¹</h3>\n                <input type=\"text\" id=\"searchQuery\" class=\"test-input\" placeholder=\"æœç´¢å…³é”®è¯\" value=\"æµ‹è¯•\">\n                <input type=\"number\" id=\"searchPage\" class=\"test-input\" placeholder=\"é¡µç \" value=\"1\">\n                <input type=\"number\" id=\"searchLimit\" class=\"test-input\" placeholder=\"æ¯é¡µæ•°é‡\" value=\"10\">\n                <br>\n                <button class=\"test-button\" onclick=\"testSearch()\">æœç´¢å†…å®¹</button>\n                <div class=\"result-area\" id=\"searchResult\"></div>\n            </div>\n\n            <!-- æ‰¹é‡æµ‹è¯• -->\n            <div class=\"test-card\">\n                <h3>âš¡ æ‰¹é‡æµ‹è¯•</h3>\n                <button class=\"test-button\" onclick=\"runAllTests()\">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>\n                <button class=\"test-button warning\" onclick=\"clearAllResults()\">æ¸…ç©ºæ‰€æœ‰ç»“æœ</button>\n                <button class=\"test-button danger\" onclick=\"stressTest()\">å‹åŠ›æµ‹è¯•</button>\n                <div class=\"result-area\" id=\"batchResult\"></div>\n            </div>\n        </div>","tag":"DIV","url":"http://127.0.0.1:5500/test.html","categories":["LKJH"],"timestamp":{"$numberLong":"1756038646123"}}